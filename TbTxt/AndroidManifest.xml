<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="org.ironrabbit.tbtxt"
      android:versionCode="26"
      android:versionName="0.5.10-BHO">

<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application android:name="org.thoughtcrime.securesms.SecureSMSApp"
         android:icon="@drawable/ic_launcher" android:label="@string/app_name_short" 
          android:configChanges="locale|orientation">
        <activity android:name="org.thoughtcrime.securesms.SecureSMS"
                  android:label="@string/app_name_short"
                  android:launchMode="singleTask"
                   android:configChanges="locale|orientation"
                  >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            	<intent-filter>
                 <action android:name="android.intent.action.SEND" />
                 <action android:name="android.intent.action.SHARE" />
             
                 <category android:name="android.intent.category.DEFAULT" />
                 <category android:name="android.intent.category.ALTERNATIVE" /> 
                 <category android:name="android.intent.category.SELECTED_ALTERNATIVE" /> 
                 
                 <data android:mimeType="text/*" />
             </intent-filter>  
             
            <intent-filter>
	          	<action android:name="android.intent.action.SENDTO"/>
              	<category android:name="android.intent.category.DEFAULT" />                  	
               	<data android:scheme="sms" />
               	<data android:scheme="smsto" />
            </intent-filter>			                   
        </activity>

	<activity android:name="org.thoughtcrime.securesms.AutoInitiateActivity" android:theme="@android:style/Theme.Dialog" android:label="TbTxt Messaging Detected" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.ApplicationPreferencesActivity" android:configChanges="locale|orientation"></activity>
    <activity android:name="org.thoughtcrime.securesms.ComposeMessageActivity" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.PassphraseCreateActivity" android:theme="@android:style/Theme.Dialog" android:label="" android:launchMode="singleInstance" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.PassphrasePromptActivity" android:theme="@android:style/Theme.Dialog" android:label="@string/enter_passphrase" android:launchMode="singleInstance" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.PassphraseChangeActivity" android:theme="@android:style/Theme.Dialog" android:label="" android:launchMode="singleInstance" android:configChanges="locale|orientation"></activity>	
	<activity android:name="org.thoughtcrime.securesms.SendKeyActivity" android:theme="@android:style/Theme.Dialog" android:label="Initiate Key Exchange" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.ReceiveKeyActivity" android:theme="@android:style/Theme.Dialog" android:label="Complete Key Exchange" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.VerifyKeysActivity" android:theme="@android:style/Theme.Dialog" android:label="Verify Session" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.VerifyIdentityActivity" android:theme="@android:style/Theme.Dialog" android:label="Verify Identity" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.VerifyImportedIdentityActivity" android:theme="@android:style/Theme.Dialog" android:label="Verify Imported Identity" android:configChanges="locale|orientation"></activity>	
	<activity android:name="org.thoughtcrime.securesms.ViewIdentityActivity" android:theme="@android:style/Theme.Dialog" android:label="Public Identity Key" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.SaveIdentityActivity" android:theme="@android:style/Theme.Dialog" android:label="Save Identity" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.ReviewIdentitiesActivity" android:theme="@android:style/Theme.Dialog" android:label="Manage Identity Keys (Long click)" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.ContactSelectionActivity" android:label="Contact Selection" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.ContactSelectionListActivity" android:label="Contact Selection" android:configChanges="locale|orientation"></activity>
	<activity android:name="org.thoughtcrime.securesms.GroupSelectionListActivity" android:label="Group Selection" android:configChanges="locale|orientation"></activity>	
	<activity android:name="org.thoughtcrime.securesms.ContactSelectionRecentActivity" android:label="Recent Calls Selection" android:configChanges="locale|orientation"></activity>	

	
	<service android:enabled="true" android:name="org.thoughtcrime.securesms.service.KeyCachingService"></service>
	<service android:enabled="true" android:name="org.thoughtcrime.securesms.service.SendReceiveService"></service>
	
<!--	<receiver android:name=".service.BootListener" -->
<!-- 			  android:enabled="true" -->
<!-- 			  android:exported="false">-->
<!--    		<intent-filter>-->
<!--        		<action android:name="android.intent.action.BOOT_COMPLETED" />-->
<!--    		</intent-filter>-->
<!--	</receiver>-->
	
	<receiver android:name="org.thoughtcrime.securesms.service.SmsListener"
			  android:enabled="true"
			  android:exported="true">
			 <intent-filter android:priority="1001">
			 	<action android:name="android.provider.Telephony.SMS_RECEIVED"></action>
			 </intent-filter>
			 <intent-filter>
			 	<action android:name="org.thoughtcrime.securesms.services.MESSAGE_SENT"></action>
			 </intent-filter>
	</receiver>

	<receiver android:name="org.thoughtcrime.securesms.service.MmsListener"
			  android:enabled="true"
			  android:exported="true"
			  android:permission="android.permission.BROADCAST_WAP_PUSH">
			 <intent-filter android:priority="1001">
			 	<action android:name="android.provider.Telephony.WAP_PUSH_RECEIVED"></action>
			 	<data android:mimeType="application/vnd.wap.mms-message" />
			 </intent-filter>
	</receiver>
		
	<provider android:name="org.thoughtcrime.securesms.providers.PartProvider" android:authorities="org.thoughtcrime.provider.securesms" />
	
       <uses-library android:name="android.test.runner" />
</application>


<permission android:name="org.ironrabbit.tbtxt.ACCESS_SECRETS"
	        android:label="Access to TbTxt Secrets"
	        android:protectionLevel="signature" />    

<uses-permission android:name="org.ironrabbit.tbtxt.ACCESS_SECRETS"></uses-permission>
<uses-permission android:name="android.permission.BROADCAST_WAP_PUSH"></uses-permission>

<uses-permission android:name="android.permission.READ_CONTACTS"></uses-permission>
<uses-permission android:name="android.permission.WRITE_CONTACTS"></uses-permission>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission>
<uses-permission android:name="android.permission.RECEIVE_MMS"></uses-permission>
<uses-permission android:name="android.permission.READ_SMS"></uses-permission>
<uses-permission android:name="android.permission.SEND_SMS"></uses-permission>
<uses-permission android:name="android.permission.WRITE_SMS"></uses-permission>
<uses-permission android:name="android.permission.VIBRATE"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />


<instrumentation android:name="android.test.InstrumentationTestRunner"
       android:targetPackage="org.thoughtcrime.securesms.tests" android:label="Tests for My App" />

</manifest> 
